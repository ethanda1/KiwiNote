(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3890:(e,t,s)=>{Promise.resolve().then(s.bind(s,513))},7839:(e,t,s)=>{"use strict";s.d(t,{w:()=>r});var l=s(7437),n=s(2265),i=s(6648),o=s(6463),a=s(4714);let r=e=>{let{handleSearch:t}=e,[s,r]=(0,n.useState)(null),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),x=(0,o.useRouter)();(0,n.useEffect)(()=>{(async()=>{let{data:{session:e}}=await a.O.auth.getSession();e?r(e.user):console.log("not signed in")})()},[]);let m=async()=>{let{error:e}=await a.O.auth.signOut();window.location.reload(),e||r(null)};return(0,l.jsxs)("div",{className:"flex justify-between p-2 bg-[#5C4033] items-center drop-shadow-2xl",children:[(0,l.jsxs)("div",{className:"hover:bg-[#3D2B1F] transition-colors duration-200 select-none rounded-full text-xl text-[#F5F5DC] font-bold py-2 px-4",onClick:()=>x.push("/"),children:[(0,l.jsx)("span",{className:"text-[#98FF98]",children:"Kiwi"}),"Note"]}),(0,l.jsx)("div",{children:t&&(0,l.jsx)("input",{type:"text",id:"search",className:"rounded-full p-3 w-full bg-[#F5F5DC] focus:outline-none focus:ring-2 focus:ring-[#98FF98] transition-all",placeholder:"Search",value:c,onChange:e=>{let s=e.target.value;d(s),t(s)}})}),(0,l.jsxs)("div",{className:"flex flex-row items-center gap-5",children:[s&&(0,l.jsx)("button",{className:"bg-[#98FF98] hover:bg-[#7FE87F] transition-colors duration-200 text-[#3D2B1F] font-bold px-4 py-2 rounded-full text-2xl font-extralight",onClick:()=>x.push("/createnote"),children:"+"}),(0,l.jsx)("div",{className:"relative inline-block text-left",children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",onClick:()=>{h(!u)},className:"flex items-center",children:(0,l.jsx)(i.default,{src:"/pfp.jpg",alt:"Profile picture",width:40,height:40,className:"rounded-full cursor-pointer hover:opacity-80 transition-opacity"})})}),u&&(0,l.jsx)("div",{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-[#F5F5DC] shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,l.jsxs)("div",{className:"py-1",role:"menu",children:[(0,l.jsx)("a",{href:"/profile",className:"block px-4 py-2 text-sm text-[#3D2B1F] hover:bg-[#E8E8D0] transition-colors duration-200",role:"menuitem",children:"Profile"}),(0,l.jsx)("a",{href:"/settings",className:"block px-4 py-2 text-sm text-[#3D2B1F] hover:bg-[#E8E8D0] transition-colors duration-200",role:"menuitem",children:"Settings"}),(0,l.jsx)("button",{onClick:m,className:"block w-full px-4 py-2 text-left text-sm text-[#3D2B1F] hover:bg-[#E8E8D0] transition-colors duration-200",role:"menuitem",children:"Sign out"})]})})]}):(0,l.jsx)("button",{onClick:()=>x.push("/login"),className:"inline-flex justify-center gap-x-1.5 rounded-md bg-[#F5F5DC] px-3 py-2 text-sm font-semibold text-[#3D2B1F] shadow-sm ring-1 ring-inset ring-[#3D2B1F] hover:bg-[#E8E8D0] transition-colors duration-200",children:"Login"})})]})]})}},513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var l=s(7437),n=s(7839),i=s(2265),o=s(4714);let a=e=>{let{searchQuery:t}=e,[s,n]=(0,i.useState)(null),[a,r]=(0,i.useState)([]),[c,d]=(0,i.useState)([]),[u,h]=(0,i.useState)(""),[x,m]=(0,i.useState)(""),[p,g]=(0,i.useState)(!0);console.log(s),(0,i.useEffect)(()=>{let e=async e=>{try{let{data:t,error:s}=await o.O.from("note").select("title, content, created_at, id, created_by").eq("created_by",e);if(s)throw s;r(t||[])}catch(e){console.error("Fetch notes error:",e)}finally{g(!1)}};(async()=>{try{let{data:{session:t},error:s}=await o.O.auth.getSession();if(s)throw s;t?(n(t.user),await e(t.user.id)):(console.log("not signed in"),g(!1))}catch(e){console.error("Session check error:",e),g(!1)}})()},[]),(0,i.useEffect)(()=>{a.length>0?d(a.filter(e=>{var s,l;return(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().includes((null==t?void 0:t.toLowerCase())||""))||(null===(l=e.content)||void 0===l?void 0:l.toLowerCase().includes((null==t?void 0:t.toLowerCase())||""))})):d([])},[t,a]);let f=(e,t)=>{h(e),m(t)};return p?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)("div",{className:"text-gray-600",children:"Loading notes..."})}):u?(0,l.jsxs)("div",{className:"p-5 max-w-[1200px] mx-auto",children:[(0,l.jsx)("button",{onClick:()=>h(""),className:"mb-5 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors",children:"Back"}),(0,l.jsxs)("div",{className:"bg-white p-5 shadow-lg rounded-md",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-4",children:x}),(0,l.jsx)("p",{className:"whitespace-pre-wrap",children:u})]})]}):(0,l.jsx)("div",{className:"flex flex-wrap justify-start items-start pt-10 gap-2 max-w-[1200px] mx-auto",children:c.length>0?c.map(e=>(0,l.jsxs)("div",{className:"w-72 h-96 bg-white p-5 text-s relative overflow-hidden shadow-xl rounded-md hover:bg-slate-50 select-none cursor-pointer",onClick:()=>f(e.content,e.title),children:[(0,l.jsx)("p",{className:"overflow-hidden line-clamp-[12]",children:e.content}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 h-20 w-full bg-slate p-5 bg-slate-50 shadow-md",children:[(0,l.jsx)("h3",{className:"font-bold display-block truncate",children:e.title}),(0,l.jsx)("small",{children:new Date(e.created_at).toLocaleDateString()})]})]},e.id)):(0,l.jsx)("div",{className:"w-full text-center text-gray-600 mt-8",children:t?"No notes match your search":"No notes found"})})};function r(){let[e,t]=(0,i.useState)("");return(0,l.jsxs)("main",{children:[(0,l.jsx)(n.w,{handleSearch:e=>{t(e)}}),(0,l.jsx)(a,{searchQuery:e})]})}},4714:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});let l=(0,s(4593).eI)("https://rujbsnjnkwfytroypmmh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ1amJzbmpua3dmeXRyb3lwbW1oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk5OTg0NDIsImV4cCI6MjA0NTU3NDQ0Mn0.QxlmHfEZKwGp8AGmIpshIwuRMUNcIOe7ml_J0ZSi814")}},e=>{var t=t=>e(e.s=t);e.O(0,[16,648,130,215,744],()=>t(3890)),_N_E=e.O()}]);